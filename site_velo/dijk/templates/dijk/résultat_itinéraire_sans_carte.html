{% extends "base.html" %}

	    
{% block contenu %}

<p> Trajet de {{départ}} à {{arrivée}}
  {% if étapes %}
  en passant par {{étapes}}.
  {% endif %}
</p>


<!-- Statistiques -->
<p>
  Longueur des trajets calculés :
  <ul>
    {% for x in stats %}
    <li> <span style = "color: {{x.3}};"> {{x.0}} : longueur : {{x.1}} m, longueur ressentie : {{x.2}} m </span></li>
    {% endfor %}
  </ul>
</p>

<p>
  <a href="{% url 'visu nv chemin' %}" target="_blank"> L’itinéraire dans un onglet séparé </a>
</p>



<!-- Formulaire pour relancer le calcul -->
<p>
    <form action = "{% url 'itinéraire' %}" method="post">
      {% csrf_token %}
      <input type="hidden" id="départ" name="départ" value="{{départ}}">

      <input type="hidden" id="arrivée" name="arrivée" value="{{arrivée}}">

      <input type="hidden" id="pourcentage_détour" name="pourcentage_détour" value = "{{post_préc.pourcentage_détour}}"><br><br>

      <label for="étapes"> Ajouter ou modifier les étapes ? </label><br>
      <input type="text" id="étapes" name="étapes" value="{{post_préc.étapes}}" size=100 ><br><br>

      <label for="rue_interdites"> Ajouter ou modifier des rues interdites ? </label><br>
      <input type="text" id="rues_interdites" name="rues_interdites" value="{{post_préc.rues_interdites}}" size=100 ><br><br>
      
      <input type="submit" value="Recalculer l’itinéraire">
    </form>
</p>


{% if étapes or post_préc.rues_interdites %}
<!-- Formulaire pour enregistrer la contribution -->
<p>
  Si l’itinéraire affiché vous paraît judicieux, autrement dit si pour aller de « {{départ}} » à « {{arrivée}} » il vous semble judicieux de
  {% if étapes %}
  passer par {{étapes}}
  {% endif %}
  {% if étapes and post_préc.rues_interdites %}
  et/ou
  {% endif %}
  {% if post_préc.rues_interdites %}
  d’éviter {{post_préc.rues_interdites}}
  {% endif%}, remplissez le formulaire ci-dessous pour l’enregistrer dans la base de donnée et ainsi améliorer l’appli pour les prochains utilisateurs !
</p>
<p>
    <form action = "{% url 'confirme nv chemin' %}" method="post">
      {% csrf_token %}
      <input type="hidden" id="départ" name="départ" value="{{départ}}">
      <input type="hidden" id="arrivée" name="arrivée" value="{{arrivée}}">
      <input type="hidden" id="étapes" name="étapes" value="{{post_préc.étapes}}">
      <input type="hidden" id="rues_interdites" name="rues_interdites" value="{{post_préc.rues_interdites}}">

      <label for="pourcentage_détour"> Pourcentage de détour : </label>
      <input type="number" id="pourcentage_détour" name="pourcentage_détour" value = "{{post_préc.pourcentage_détour}}"><br>
      <label for="AR"> Valable aussi pour le retour ? </label>
      <input type="checkbox" id="AR" name="AR"><br>

      <input type="submit" value="Enregistrer la contribution"><br>
      Patienter quelques instants : le programme d’apprentissage va tourner pour analyser votre contribution.
    </form>
</p>

{% endif %}

<!-- La carte -->
<section>
  <div class="carte">
  {% block carte %}
  {% endblock carte %}
  </div>
</section>

{% endblock contenu %}
